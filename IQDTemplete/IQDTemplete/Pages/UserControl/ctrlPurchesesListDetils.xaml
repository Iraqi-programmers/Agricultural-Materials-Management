<UserControl x:Class="Interface.Pages.UserControl.ctrlPurchesesListDetils"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Interface.Pages.UserControl"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800"
             FlowDirection="{DynamicResource AppFlowDirection}">

    <UserControl.Resources>
        <Style x:Key="CustomText" TargetType="TextBlock">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="FontWeight" Value="ExtraLight"/>
            <Setter Property="Foreground" Value="{DynamicResource TertiaryTextColor}"/>
        </Style>
    </UserControl.Resources>

    <!-- Grid رئيسي -->
    <Grid>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Border مع تفاصيل القائمة -->
            <Border Grid.Row="0" BorderThickness="1" Padding="10" Margin="10" FlowDirection="{DynamicResource SPAppFlowDirection}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- تفاصيل القائمة -->
                    <TextBlock Grid.Row="0" Grid.Column="5" FontSize="22" FontWeight="ExtraBold" Style="{StaticResource CustomText}" Text="تفـاصـيل القائمة"/>

                    <!-- رقم القائمة -->
                    <TextBlock Grid.Row="1" Grid.Column="5" Style="{StaticResource CustomText}" Text=": رقم القائمة"/>
                    <TextBlock Grid.Row="1" Grid.Column="4" Style="{StaticResource CustomText}" Text="1" HorizontalAlignment="Right"/>

                    <!-- اسم المورد -->
                    <TextBlock Grid.Row="2" Grid.Column="5" Style="{StaticResource CustomText}" Text=": اسم المورد"/>
                    <TextBlock Grid.Row="2" Grid.Column="4" Style="{StaticResource CustomText}" HorizontalAlignment="Right">
                        <Hyperlink x:Name="SupplierName" Click="SupplierName_Click" ToolTip="عرض تفاصيل المورد">علي صالح</Hyperlink>
                    </TextBlock>

                    <!-- التاريخ -->
                    <TextBlock Grid.Row="3" Grid.Column="5" Style="{StaticResource CustomText}" Text=": تاريخ القائمة"/>
                    <TextBlock Grid.Row="3" Grid.Column="4" Style="{StaticResource CustomText}" Text="2025\12\12" HorizontalAlignment="Right"/>

                    <!-- المبلغ الكلي -->
                    <TextBlock Grid.Row="4" Grid.Column="5" Style="{StaticResource CustomText}" Text=": المبلغ الكلي"/>
                    <TextBlock Grid.Row="4" Grid.Column="4" Style="{StaticResource CustomText}" Text="50.000" HorizontalAlignment="Right"/>

                    <!-- المبلغ المدفوع -->
                    <TextBlock Grid.Row="5" Grid.Column="5" Style="{StaticResource CustomText}" Text=": المبلغ المدفوع"/>
                    <TextBlock Grid.Row="5" Grid.Column="4" Style="{StaticResource CustomText}" Text="25.000" HorizontalAlignment="Right"/>

                    <!-- تفاصيل المنتج -->
                    <TextBlock Grid.Row="0" Grid.Column="3" FontSize="22" FontWeight="ExtraBold" Style="{StaticResource CustomText}" Text="تفـاصـيل المنتج"/>

                    <!-- نوع المنتج -->
                    <TextBlock Grid.Row="1" Grid.Column="3" Style="{StaticResource CustomText}" Text=": نوع المنتج"/>
                    <TextBlock Grid.Row="1" Grid.Column="2" Style="{StaticResource CustomText}" Text="مرشات" HorizontalAlignment="Right"/>

                    <!-- السعر -->
                    <TextBlock Grid.Row="2" Grid.Column="3" Style="{StaticResource CustomText}" Text=": السعر"/>
                    <TextBlock Grid.Row="2" Grid.Column="2" Style="{StaticResource CustomText}" Text="12.000" HorizontalAlignment="Right"/>

                    <!-- الكمية -->
                    <TextBlock Grid.Row="3" Grid.Column="3" Style="{StaticResource CustomText}" Text=": الكمية"/>
                    <TextBlock Grid.Row="3" Grid.Column="2" Style="{StaticResource CustomText}" Text="10" HorizontalAlignment="Right"/>

                    <!-- السعر الكلي -->
                    <TextBlock Grid.Row="4" Grid.Column="3" Style="{StaticResource CustomText}" Text=": السعر الكلي"/>
                    <TextBlock Grid.Row="4" Grid.Column="2" Style="{StaticResource CustomText}" Text="12.000.000" HorizontalAlignment="Right"/>

                    <!-- تاريخ الضمان -->
                    <TextBlock Grid.Row="5" Grid.Column="3" Style="{StaticResource CustomText}" Text=": تاريخ الضمان"/>
                    <TextBlock Grid.Row="5" Grid.Column="2" Style="{StaticResource CustomText}" Text="2026/12/12" HorizontalAlignment="Right"/>

                    <!-- صورة المستخدم -->
                    <Image x:Name="UserInfo" Grid.Column="1" HorizontalAlignment="Left" Grid.Row="0" Width="40" Height="40" Source="/Assets/Logo.png" MouseDown="UserInfo_MouseDown" ToolTip="تفاصيل مدخل القائمة"/>
                </Grid>
            </Border>

            <!-- DataGrid للقوائم الفرعية -->
            <DataGrid Grid.Row="1" FlowDirection="{DynamicResource SPAppFlowDirection}"
                      AutoGenerateColumns="False"
                      HeadersVisibility="Column"
                      IsReadOnly="True"
                      SelectionMode="Single"
                      SelectionUnit="FullRow"
                      GridLinesVisibility="Horizontal"
                      RowBackground="White"
                      AlternatingRowBackground="#FF97ACCE"
                      BorderThickness="1"
                      Margin="10"
                      FontSize="16"
                      FontFamily="Segoe UI"
                      ItemsSource="{Binding SubInvoices}">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="رقم القائمة" Binding="{Binding InvoiceNumber}" Width="*" MinWidth="100"/>
                    <DataGridTextColumn Header="نـوع المنتج" Width="*" MinWidth="150"/>
                    <DataGridTextColumn Header="العـدد" Width="*" MinWidth="80"/>
                    <DataGridTextColumn Header="السـعر" Width="*" MinWidth="100"/>
                    <DataGridTextColumn Header="التاريخ" Binding="{Binding Date}" Width="*" MinWidth="120"/>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>

        <!-- LoadingControl فوق كل العناصر -->
        <local:ctrlModernLoadingControl x:Name="LoadingControl" Visibility="Collapsed" Panel.ZIndex="1" VerticalAlignment="Top"/>
    </Grid>
</UserControl>